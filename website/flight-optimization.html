<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="style.css" />
    <title>Flight Optimization — Pru Yontrarak</title>

    <style>
      :root { --text:#222; --muted:#555; --line: rgba(0,0,0,.1); }
      .section__work {
        width: 90vw;
        max-width: 1200px;
        padding: calc(var(--nav-height) + 1rem) 1rem 2rem 1rem;
        margin: 0 auto;
      }
      .note { background: transparent; border: 1px solid var(--line); padding: .75rem 1rem; border-radius: 10px; color: #1a1a1a; }
      /* Match shared page typography (use global styles) */
      /* Bullets */
      ul.methods, ul.feature-list, ul.api-list, ul.next-steps, ul.cache-list, ul.algo-list, ul.meta-list, ul.roadmap-list {
        list-style-position: outside;
        padding-left: 1.25rem;
        margin: .25rem 0 .75rem 0;
      }
      ul.algo-list ul { padding-left: 2rem; margin-left: 0.5rem; margin-top: .25rem; }
      ul li { margin-bottom: .35rem; }
      ul li code { display: inline; white-space: normal; }
      code { background: rgba(0,0,0,0.05); padding: .1rem .3rem; border-radius: 4px; }
      /* KPIs */
      .kpis { display: grid; grid-template-columns: repeat(auto-fit, minmax(230px, 1fr)); gap: .75rem; margin: .5rem 0 1rem; }
      .kpi { border: 1px solid var(--line); border-radius: 10px; padding: .65rem .8rem; font-size: .95rem; color: #555; }
      .kpi strong { display:block; color: var(--text); }
      a.kpi { text-decoration: none; display: block; color: inherit; transition: background-color 0.2s, border-color 0.2s; }
      a.kpi:hover { background-color: rgba(0,0,0,0.02); border-color: rgba(0,0,0,0.15); cursor: pointer; }
      .hr { height: 1px; background: var(--line); margin: 1rem 0; }
      .skills { color:#666; font-style: italic; margin-top:.25rem; }
      a.kicker { text-decoration: none; border-bottom: 1px solid currentColor; }
      /* Prominent top-level buttons */
      .cta-row { margin: .5rem 0 1rem; display: flex; gap: .75rem; flex-wrap: wrap; }
      .cta-btn { display:inline-flex; align-items:center; gap:.4rem; padding:.5rem .85rem; border-radius:999px; border:1px solid var(--primary-color-dark); background: rgba(78,53,101,0.10); color:#2d1f3d; text-decoration:none; font-weight:600; transition:background-color .2s ease, transform .1s ease; }
      .cta-btn:hover { background: rgba(78,53,101,0.16); transform: translateY(-1px); }
    </style>
  </head>
  <body>
    <nav>
      <div class="nav__content">
        <div class="logo" id="home-button"><a href="index.html#top"><span class="name"> Pru Yontrarak</span></a></div>
        <label for="check" class="checkbox" aria-label="Toggle navigation">
          <span class="hamburger" aria-hidden="true">
            <span></span><span></span><span></span>
          </span>
        </label>
        <input type="checkbox" name="check" id="check" />
        <ul>
          <li><a href="index.html#timeline" id="timeline-button">timeline</a></li>
          <li><a href="index.html#csprojects" id="research-button">cs projects</a></li>
          <li><a href="index.html#casestudies" id="work-button">case studies</a></li>
        </ul>
      </div>
    </nav>

    <main class="section__work">
      <h1 class="title">Multi-City Optimized Flight Planner</h1>
      <p class="description note">
        <strong>Position</strong>: Backend Engineer, Frontend Engineer, Product Lead<br>
        <strong>Type</strong>: Personal project<br>
        <strong>Duration</strong>: Sep 2025 - Present<br>
        <strong>Stack</strong>: <em>Backend</em> — Python · FastAPI · Uvicorn · SQL <em>Frontend</em> — React<br>
        <strong>Skills</strong>: API design, caching, optimization, constraint modeling, UX/UI design, machine learning (ML), database
      </p>

      <div class="cta-row">
        <a href="https://optimafly.com/" target="_blank" rel="noopener noreferrer" class="cta-btn">Live Website</a>
      </div>

      <h1>Summary</h1>
      <div class="kpis">
        <div class="kpi">
          <strong>≈30% speed up</strong>
          Optimization: skip dead-end airport queries after 3 consecutive no-connection days.
        </div>
        <div class="kpi">
          <strong>24h timeline cache</strong>
          Per-session TTL to avoid refetching identical legs within a day.
        </div>
        <div class="kpi">
          <strong>User data &amp; recommendations</strong>
          PostgreSQL stores user interactions for analytics; feeds into an ML recommendation system.
        </div>
        <a href="https://optimafly.com/" target="_blank" rel="noopener noreferrer" class="kpi">
          <strong>Deployment</strong>
          FastAPI backend deployed with Uvicorn; React frontend served via static hosting.
        </a>
      </div>

      <div class="hr"></div>

      <h1 class="subtitle">Objective</h1>
      <p class="description">
        Construct flexible, cost-minimized itineraries given travel windows, stay durations, and required or optional destinations. Treat the itinerary as a constraint-optimization task so the system finds the most cost-efficient multi-city plan that fits the schedule and is the lowest-cost option.
      </p>

      <h1 class="subtitle">Why This Project?</h1>
      <p class="description">
        We want to travel and gain as many new experiences as possible on tight budgets and narrow windows. Current tools assume fixed destinations or single routes, which breaks down when the goal is flexible exploration across multiple cities. This project fixes that by letting you specify time windows; must vs. optional cities; and min/max stay days so the system searches and builds a plan that actually fits your constraints.
      </p>

      <h1 class="subtitle">Algorithms</h1>
      <ul class="algo-list">
        <li><strong>Greedy baseline:</strong> Rejected due to local-minima behavior; produced suboptimal downstream legs that we not always feasible given user travel time constraint.</li>
        <li><strong>Top-K nearest neighbors + Beam Search (current):</strong> Chooses the cheapest <em>K</em> legs (sorted by price) and breaks ties by earliest arrival time.
          <ul>
            <li><strong>K:</strong> number of cheapest candidate legs to consider at each step (per alias-expanded O/D).</li>
            <li><strong>BEAM:</strong> beam width (keeps BEAM best partial sequences per layer).</li>
          </ul>
        </li>
      </ul>

      <h1 class="subtitle">Cache</h1>
      <ul class="cache-list">
        <li>Caches the past 24 hours of timeline data per backend session (TTL 24h). 24 hour is currently a placeholder; it will be replaced with dynamic TTL that matches external API.</li>
        <li><strong>Optimization:</strong> Skip airports with no connections after 3 consecutive no‑connection days (~30% speedup).</li>
        <li>Attaches basic diagnostics alongside prices in cached payloads.</li>
      </ul>

      <h1 class="subtitle">Reachability Gate</h1>
      <ul class="meta-list">
        <li>No offline preprocessing, so the reachability is computed in real time.</li>
        <li>Breadth-first search over a connection map supports both direct and multi-leg routes.</li>
        <li>BFS explores airport pairs layer-by-layer to determine connectivity, enabling reliable detection of transfer paths.</li>
      </ul>

      <h1 class="subtitle">Key Features</h1>
      <ul class="feature-list">
        <li><strong>Heuristic optimization:</strong> Graph-based solver that generates feasible, low-cost itineraries under user constraints.</li>
        <li><strong>Structured API:</strong> JSON inputs for windows, stay durations, and must/optional city sets; ranked plans with simple diagnostics.</li>
        <li><strong>Interactive frontend:</strong> React UI to create, submit, and visualize candidate itineraries; tie-breakers surfaced (earliest arrival).</li>
        <li><strong>Personalized recommendation system:</strong> ML-based recommendations driven by stored user interaction data and deduplicated features.</li>
      </ul>

      <h1 class="subtitle">Next Steps</h1>
      <ul class="roadmap-list">
        <li>Implement optimization preference in the future (e.g., price vs. time vs. stops).</li>
        <li>We need to figure out a smarter way to reduce the API call; we don’t want to rely on this API in the future (do web scraping to Google Flights).</li>
        <li>Want the airline website to be integrated so that you can click on it and buy the tickets on the official airline website or Expedia.</li>
        <li>Harden error handling, caching, and performance for larger searches and heavier usage.</li>
      </ul>
    </main>

    <footer>
      <div class="footer__content">
        <div>© Pru Yontrarak</div>
        <div class="footer__links">
          <a href="https://www.linkedin.com/in/pruyontrarak" target="_blank" rel="noopener noreferrer">LinkedIn</a>
          <a href="https://github.com/pruyontrarakk" target="_blank" rel="noopener noreferrer">GitHub</a>
          <a href="mailto:ppy2104@columbia.edu">Email</a>
        </div>
      </div>
    </footer>

    <script>
      (function(){
        var link = document.getElementById('research-button');
        if (link) link.classList.add('active');
      })();
    </script>
  </body>
</html>
